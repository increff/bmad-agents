<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algorithm Output Validation Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header .meta {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .chart-card:hover {
            transform: translateY(-2px);
        }

        .chart-card h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.2em;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .filters {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .filter-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-controls select, .filter-controls input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .filter-controls button {
            padding: 8px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .filter-controls button:hover {
            background: #5568d3;
        }

        .error-details {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .error-item {
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background: #fafafa;
        }

        .error-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .error-file {
            font-weight: bold;
            color: #2c3e50;
        }

        .error-severity {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        .severity-critical { background: #e74c3c; color: white; }
        .severity-high { background: #e67e22; color: white; }
        .severity-medium { background: #f39c12; color: white; }
        .severity-low { background: #27ae60; color: white; }

        .error-description {
            color: #555;
            margin-bottom: 8px;
        }

        .error-location {
            font-family: monospace;
            background: #f8f9fa;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 13px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #333;
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        .tab-container {
            margin-bottom: 20px;
        }

        .tab-buttons {
            display: flex;
            background: #f8f9fa;
            border-radius: 8px 8px 0 0;
        }

        .tab-btn {
            padding: 12px 24px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .tab-btn.active {
            background: white;
            font-weight: bold;
            border-radius: 8px 8px 0 0;
        }

        .tab-content {
            background: white;
            padding: 20px;
            border-radius: 0 8px 8px 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }

            .filter-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Algorithm Output Validation Report</h1>
            <div class="meta">
                <div>Generated: <span id="report-date"></span></div>
                <div>Status: <span id="overall-status"></span></div>
                <div>Total Files: <span id="total-files"></span></div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="passed-count">0</div>
                <div class="stat-label">Files Passed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="failed-count">0</div>
                <div class="stat-label">Files Failed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="error-count">0</div>
                <div class="stat-label">Total Errors</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="critical-count">0</div>
                <div class="stat-label">Critical Issues</div>
            </div>
        </div>

        <div class="dashboard">
            <div class="chart-card">
                <h3>Error Distribution by Type</h3>
                <div class="chart-container">
                    <canvas id="errorTypeChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <h3>Errors by File Type</h3>
                <div class="chart-container">
                    <canvas id="fileTypeChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <h3>Error Severity Breakdown</h3>
                <div class="chart-container">
                    <canvas id="severityChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <h3>Most Affected Files</h3>
                <div class="chart-container">
                    <canvas id="fileErrorChart"></canvas>
                </div>
            </div>
        </div>

        <div class="filters">
            <h3>Filter & Search</h3>
            <div class="filter-controls">
                <select id="severity-filter">
                    <option value="">All Severities</option>
                    <option value="critical">Critical</option>
                    <option value="high">High</option>
                    <option value="medium">Medium</option>
                    <option value="low">Low</option>
                </select>
                <select id="type-filter">
                    <option value="">All Error Types</option>
                    <option value="schema">Schema</option>
                    <option value="data_quality">Data Quality</option>
                    <option value="regression">Regression</option>
                    <option value="performance">Performance</option>
                </select>
                <input type="text" id="search-input" placeholder="Search errors...">
                <button onclick="resetFilters()">Reset Filters</button>
            </div>
        </div>

        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showTab('overview')">Overview</button>
                <button class="tab-btn" onclick="showTab('details')">Detailed Errors</button>
                <button class="tab-btn" onclick="showTab('trends')">Error Trends</button>
            </div>

            <div id="overview-tab" class="tab-content">
                <h3>Error Overview</h3>
                <div class="chart-container" style="height: 400px;">
                    <canvas id="overviewChart"></canvas>
                </div>
            </div>

            <div id="details-tab" class="tab-content hidden">
                <h3>Detailed Error List</h3>
                <div id="error-list" class="error-details">
                    <!-- Error items will be populated by JavaScript -->
                </div>
            </div>

            <div id="trends-tab" class="tab-content hidden">
                <h3>Error Trends Over Time</h3>
                <div class="chart-container" style="height: 400px;">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data - replace with your actual validation results
        const validationData = {
            date: "2024-01-15",
            status: "Completed with Errors",
            totalFiles: 150,
            passedFiles: 120,
            failedFiles: 30,
            totalErrors: 45,
            criticalErrors: 8,
            errors: [
                {
                    id: "err_001",
                    file: "output/data_batch_001.json",
                    type: "schema",
                    severity: "critical",
                    description: "Missing required field: 'timestamp'",
                    location: "line 45",
                    timestamp: "2024-01-15T10:23:45Z"
                },
                {
                    id: "err_002",
                    file: "output/results_2024.csv",
                    type: "data_quality",
                    severity: "high",
                    description: "Null values detected in critical column",
                    location: "column 'score'",
                    timestamp: "2024-01-15T10:24:12Z"
                },
                {
                    id: "err_003",
                    file: "output/model_predictions.json",
                    type: "regression",
                    severity: "medium",
                    description: "Prediction accuracy below baseline threshold",
                    location: "model output",
                    timestamp: "2024-01-15T10:25:03Z"
                }
            ],
            errorTypeCounts: {
                "schema": 12,
                "data_quality": 18,
                "regression": 10,
                "performance": 5
            },
            fileTypeCounts: {
                "JSON": 25,
                "CSV": 15,
                "XML": 5
            },
            severityCounts: {
                "critical": 8,
                "high": 15,
                "medium": 12,
                "low": 10
            },
            fileErrorCounts: [
                { file: "data_batch_001.json", count: 8 },
                { file: "results_2024.csv", count: 6 },
                { file: "model_predictions.json", count: 5 },
                { file: "config_output.xml", count: 4 },
                { file: "processing_log.json", count: 3 }
            ]
        };

        // Initialize charts
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            populateErrorList();
            updateStats();
        });

        function initializeCharts() {
            // Error Type Distribution
            const errorTypeCtx = document.getElementById('errorTypeChart').getContext('2d');
            new Chart(errorTypeCtx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(validationData.errorTypeCounts),
                    datasets: [{
                        data: Object.values(validationData.errorTypeCounts),
                        backgroundColor: ['#ff6384', '#36a2eb', '#cc65fe', '#ffce56']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // File Type Distribution
            const fileTypeCtx = document.getElementById('fileTypeChart').getContext('2d');
            new Chart(fileTypeCtx, {
                type: 'bar',
                data: {
                    labels: Object.keys(validationData.fileTypeCounts),
                    datasets: [{
                        label: 'Errors',
                        data: Object.values(validationData.fileTypeCounts),
                        backgroundColor: '#36a2eb'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { 
                            beginAtZero: true,
                            ticks: {
                                precision: 0
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Severity Breakdown
            const severityCtx = document.getElementById('severityChart').getContext('2d');
            new Chart(severityCtx, {
                type: 'pie',
                data: {
                    labels: Object.keys(validationData.severityCounts),
                    datasets: [{
                        data: Object.values(validationData.severityCounts),
                        backgroundColor: ['#e74c3c', '#e67e22', '#f39c12', '#27ae60']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Most Affected Files
            const fileErrorCtx = document.getElementById('fileErrorChart').getContext('2d');
            new Chart(fileErrorCtx, {
                type: 'bar',
                data: {
                    labels: validationData.fileErrorCounts.map(item => item.file),
                    datasets: [{
                        label: 'Error Count',
                        data: validationData.fileErrorCounts.map(item => item.count),
                        backgroundColor: '#ff6384'
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { 
                            beginAtZero: true,
                            ticks: {
                                precision: 0
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Overview Chart
            const overviewCtx = document.getElementById('overviewChart').getContext('2d');
            new Chart(overviewCtx, {
                type: 'radar',
                data: {
                    labels: ['Schema', 'Data Quality', 'Regression', 'Performance'],
                    datasets: [{
                        label: 'Error Types',
                        data: [
                            validationData.errorTypeCounts.schema || 0,
                            validationData.errorTypeCounts.data_quality || 0,
                            validationData.errorTypeCounts.regression || 0,
                            validationData.errorTypeCounts.performance || 0
                        ],
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            ticks: {
                                precision: 0
                            }
                        }
                    }
                }
            });
        }

        function populateErrorList() {
            const errorList = document.getElementById('error-list');
            errorList.innerHTML = '';

            validationData.errors.forEach(error => {
                const errorItem = document.createElement('div');
                errorItem.className = 'error-item';
                errorItem.setAttribute('data-severity', error.severity);
                errorItem.setAttribute('data-type', error.type);

                errorItem.innerHTML = `
                    <div class="error-header">
                        <div class="error-file">${error.file}</div>
                        <div class="error-severity severity-${error.severity}">${error.severity.toUpperCase()}</div>
                    </div>
                    <div class="error-description">${error.description}</div>
                    <div class="error-location">Type: ${error.type} | Location: ${error.location}</div>
                `;

                errorList.appendChild(errorItem);
            });
        }

        function updateStats() {
            document.getElementById('report-date').textContent = validationData.date;
            document.getElementById('overall-status').textContent = validationData.status;
            document.getElementById('total-files').textContent = validationData.totalFiles;
            document.getElementById('passed-count').textContent = validationData.passedFiles;
            document.getElementById('failed-count').textContent = validationData.failedFiles;
            document.getElementById('error-count').textContent = validationData.totalErrors;
            document.getElementById('critical-count').textContent = validationData.criticalErrors;
        }

        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });

            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName + '-tab').classList.remove('hidden');

            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Filter functionality
        document.getElementById('severity-filter').addEventListener('change', filterErrors);
        document.getElementById('type-filter').addEventListener('change', filterErrors);
        document.getElementById('search-input').addEventListener('input', filterErrors);

        function filterErrors() {
            const severityFilter = document.getElementById('severity-filter').value;
            const typeFilter = document.getElementById('type-filter').value;
            const searchTerm = document.getElementById('search-input').value.toLowerCase();

            const errorItems = document.querySelectorAll('.error-item');

            errorItems.forEach(item => {
                const severity = item.getAttribute('data-severity');
                const type = item.getAttribute('data-type');
                const text = item.textContent.toLowerCase();

                const matchesSeverity = !severityFilter || severity === severityFilter;
                const matchesType = !typeFilter || type === typeFilter;
                const matchesSearch = !searchTerm || text.includes(searchTerm);

                if (matchesSeverity && matchesType && matchesSearch) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function resetFilters() {
            document.getElementById('severity-filter').value = '';
            document.getElementById('type-filter').value = '';
            document.getElementById('search-input').value = '';

            const errorItems = document.querySelectorAll('.error-item');
            errorItems.forEach(item => {
                item.style.display = 'block';
            });
        }
    </script>
</body>
</html>